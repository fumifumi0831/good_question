# Supabase API Key 修正ガイド

## 🚨 問題

`NEXT_PUBLIC_SUPABASE_ANON_KEY` に **Publishable Key** が設定されていますが、必要なのは **Anon Key** です。

## 📋 正しい API Key の取得方法

### ステップ 1: Supabase Dashboard にアクセス

1. [Supabase Dashboard](https://supabase.com/dashboard) を開く
2. プロジェクト `jxqfqvorvbgijbchtbyp` を選択

### ステップ 2: API キーを取得

1. 左サイドバーの **Settings** (歯車アイコン) をクリック
2. **API** をクリック
3. **Project API keys** セクションを確認

### ステップ 3: 正しいキーをコピー

以下の2つのキーが表示されます：

- **anon public**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` で始まる長いキー
  - **これが必要なキーです！**
- **service_role**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` で始まる別の長いキー
  - これは使用しません（サーバー側専用）

### ステップ 4: .env.local を更新

`app/.env.local` ファイルを以下のように更新してください：

```bash
GOOGLE_AI_API_KEY=AIzaSyAqY5tg7iI2zfTdBDxnfZ3GK9K7fNbAYt8
NEXT_PUBLIC_SUPABASE_URL=https://jxqfqvorvbgijbchtbyp.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...（ここに anon public キーを貼り付け）
```

**重要**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9` で始まる長いキーをコピーしてください。

### ステップ 5: 開発サーバーを再起動

環境変数を変更したら、開発サーバーを再起動する必要があります：

```bash
# ターミナルで Ctrl+C を押してサーバーを停止
# その後、再度起動
npm run dev
```

## 🎯 確認方法

1. ブラウザで `http://localhost:3000/auth/signup` を開く
2. メールアドレスとパスワードを入力
3. 「アカウント作成」をクリック
4. エラーが表示されず、登録が成功することを確認

## 📸 参考画像

Supabase Dashboard の API セクションは以下のように表示されます：

![Supabase API Keys](file:///Users/fumipen/.gemini/antigravity/brain/35e9cdbf-c57f-4fc8-9f0d-045b5cc24de1/uploaded_image_1766792150131.png)

**anon public** キーをコピーしてください。
