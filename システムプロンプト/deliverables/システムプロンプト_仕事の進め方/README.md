# システムプロンプトセット

実装方針を確定するための 3 つのシステムプロンプトとチェックリストです。

---

## 概要

このシステムプロンプトセットは、以下のワークフローを支援します：

```
Why/What設定（人間）
  ↓
調査（AI支援）
  ↓
調査資料まとめ（AI支援）
  ↓
仮説立て（人間）
  ↓
検証（AI支援：HTML/Python）
  ↓
方針書作成（AI支援：段階的対話）
  ↓
人間判断・理解・OK
  ↓
アプリ組み込み（AI実装）
```

---

## ファイル構成

### 1. 調査システムプロンプト (`01_調査システムプロンプト.md`)

**目的**: Why/What を基に、実装方針を確定するために必要な情報を収集・整理する

**使用タイミング**: Why/What 設定後、仮説立て前

**入力**:

- Why（なぜこのタスクをやるのか）
- What（何を達成するのか）

**出力**: 調査結果（Markdown 形式）

---

### 2. 検証システムプロンプト (`02_検証システムプロンプト.md`)

**目的**: 仮説を基に、HTML/Python で小さく検証し、技術的実現可能性を確認する

**使用タイミング**: 仮説立て後、方針書作成前

**入力**:

- 仮説（検証する内容）
- 検証項目

**出力**: 検証コードと検証結果（Markdown 形式）

---

### 3. 方針書作成システムプロンプト (`03_方針書作成システムプロンプト.md`)

**目的**: 調査結果と検証結果を統合し、実装に必要な情報を整理した方針書を作成する

**使用タイミング**: 検証完了後、実装前

**入力**:

- 調査結果
- 検証結果
- Why/What

**出力**: 実装方針書（Markdown 形式）

**特徴**:

- 段階的な対話で方針を明確化
- 関数/コンポーネント単位の入出力を定義
- アプリ組み込み時に使える粒度まで落とし込む

---

### 4. 実装前チェックリスト (`実装前チェックリスト.md`)

**目的**: 方針書が完成し、実装に進む前に確認すべき項目をチェックする

**使用タイミング**: 方針書完成後、実装前

---

## 使い方

### ステップ 1: 調査

1. `01_調査システムプロンプト.md`を AI に読み込ませる
2. **Why/What の確認**: 
   - ユーザーが Why/What を提示した場合: その内容を確認して調査を開始
   - ユーザーが「お願いします」程度の指示しか出さない場合: AI側から能動的にヒアリングを行う、または関連文書を探索して確認する
3. 調査結果を確認し、必要に応じて追加調査を依頼

**例（Why/Whatが提示された場合）**:

```
Why: ユーザーの検索クエリに対して、類似したドキュメントを高速に検索できる機能を実装したい
What: RAGシステムの検索機能を実装するための技術選択と実装方針を確定する
```

**例（簡潔な指示の場合）**:

```
ユーザー: 「調査をお願いします」
AI: 「調査を開始するために、以下の情報を確認させてください：
1. なぜこの調査が必要ですか？（Why）
2. 何を明らかにしたいですか？（What）
また、プロジェクト内に要件定義書や設計書などの関連文書があれば、それも確認させてください。」
```

### ステップ 2: 検証

1. `02_検証システムプロンプト.md`を AI に読み込ませる
2. **仮説と検証項目の確認**:
   - ユーザーが仮説と検証項目を提示した場合: その内容を確認して検証を開始
   - ユーザーが「お願いします」程度の指示しか出さない場合: AI側から能動的にヒアリングを行う、または関連文書を探索して確認する
3. 検証コードを実行し、結果を確認
4. 必要に応じて追加検証を依頼

**例（仮説と検証項目が提示された場合）**:

```
仮説: RAGシステムの検索機能を実装するために、sentence-transformersとFAISSを使用する
検証項目:
1. sentence-transformersでテキストをベクトル化できるか
2. FAISSでベクトル検索ができるか
3. 検索結果の形式が期待通りか
```

**例（簡潔な指示の場合）**:

```
ユーザー: 「検証をお願いします」
AI: 「検証を開始するために、以下の情報を確認させてください：
1. 検証したい仮説は何ですか？
2. どの項目を検証したいですか？
また、調査結果や関連文書があれば、それも確認させてください。」
```

### ステップ 3: 方針書作成

1. `03_方針書作成システムプロンプト.md`を AI に読み込ませる
2. **調査結果と検証結果の確認**:
   - ユーザーが調査結果と検証結果を提示した場合: その内容を確認して方針書作成を開始
   - ユーザーが「お願いします」程度の指示しか出さない場合: AI側から能動的にヒアリングを行う、または関連文書を探索して確認する
3. 段階的な対話で方針を明確化
4. 方針書が完成したら、`実装前チェックリスト.md`で確認

**例（調査結果と検証結果が提示された場合）**:

```
調査結果: [調査結果のMarkdown]
検証結果: [検証結果のMarkdown]
Why: [なぜこの機能を実装するのか]
What: [何を実装するのか]
```

**例（簡潔な指示の場合）**:

```
ユーザー: 「方針書作成をお願いします」
AI: 「方針書を作成するために、以下の情報を確認させてください：
1. 調査結果のファイルはありますか？
2. 検証結果のファイルはありますか？
3. Why/Whatは明確ですか？
関連文書があれば、それも確認させてください。」
```

### ステップ 4: 実装前チェック

1. `実装前チェックリスト.md`で方針書を確認
2. すべての項目にチェックが入ったら、実装に進む

---

## 重要な原則

### 1. 能動的なヒアリングと文書確認（最重要）

**前提**: ユーザーは「お願いします」程度の簡潔な指示しか出さないことがほとんどです。Why/Whatや仮説が与えられない場合、AI側から能動的にヒアリングするか、関連する文書ファイルを見つけてユーザーに確認してから作業を進める必要があります。

**方向性がずれないための必須プロセス**:

1. **指示が簡潔な場合の対応**:
   - ユーザーが「お願いします」程度の指示しか出さない場合、AI側から能動的にヒアリングを行う
   - Why/What、仮説、検証項目など、作業に必要な情報を質問形式で確認する
   - 確認が取れるまで作業を開始しない

2. **文書ファイルの探索と確認**:
   - プロジェクト内の関連文書（要件定義書、設計書、議事録、タスク管理ファイルなど）を探索する
   - 見つかった文書の内容を要約し、ユーザーに確認する
   - 「この文書の内容で正しいですか？」と確認してから作業を進める

3. **確認プロセスの徹底**:
   - 方向性がずれないよう、必ずユーザーの確認を得てから作業を開始する
   - 推測で作業を進めない
   - 不明点があれば必ず確認する

### 2. 段階的な明確化

一度にすべてを明確化しようとせず、段階的に進めます。

- 調査 → 基本方針の確認
- 検証 → 検証結果の統合
- 方針書作成 → 実装詳細の明確化

### 3. 対話による確認

各ステップで必ずユーザーの確認を得ます。

- 「この調査結果で十分ですか？」
- 「この検証結果で問題ありませんか？」
- 「この方針書で実装を進めて問題ありませんか？」

### 4. 入出力の明確化

実装に進む前に、関数/コンポーネント単位の入出力を必ず定義します。

- 入力: 引数、Props、データ形式
- 出力: 戻り値、State、データ形式
- データフロー: 入出力ペアで理解

### 5. 根拠の記録

技術選択や判断の根拠を必ず記録します。

- なぜその技術を選んだか
- 検証で確認できたこと
- 実装時の注意点

---

## よくある質問

### Q: 調査と検証を同時に進めてもいいですか？

A: 基本的には順番に進めることを推奨します。調査で技術選択の方向性を決めてから検証することで、無駄な検証を避けられます。

### Q: 方針書が完成するまでに何回対話が必要ですか？

A: プロジェクトの複雑さによりますが、通常は 3-5 回の対話で完成します。段階的に明確化するため、焦らず進めてください。

### Q: 方針書の粒度はどこまで詳細にすべきですか？

A: 理想は関数/コンポーネント単位の入出力までですが、一発でそこまでいくことは難しいです。段階的に詳細化していきましょう。

### Q: 実装前チェックリストのすべての項目にチェックが入らない場合は？

A: 不足している項目を明確化してから実装に進むことを推奨します。不明点やリスクがある場合は、それらを記録した上で実装を進めることも可能です。

---

## 更新履歴

- 2025-01-27: 初版作成
- 2025-01-27: バグ取りシステムプロンプトを独立したディレクトリ「バグ取りの進め方」に移動
- 2025-01-27: 能動的ヒアリングと文書確認プロセスの追加（Why/Whatが与えられない場合の対応を明確化）

---

## 参考資料

- [AI 時代の仕事の仕方.md](../AI時代の仕事の仕方.md)
- [AI 時代の仕事の仕方\_実践ガイド.md](../AI時代の仕事の仕方_実践ガイド.md)
