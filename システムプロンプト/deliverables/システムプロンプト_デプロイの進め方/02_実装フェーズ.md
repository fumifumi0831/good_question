# 実装フェーズ（フェーズ 4-6）

## 目的

CI/CD パイプラインを実装し、ローカルで検証する。ローカル検証スクリプトを実装し、CI/CD パイプラインを実装し、ローカル検証を実施する。

---

## フェーズ 4: ローカル検証スクリプトの実装

### 目的

パイプラインの各ステップをローカルで再現するスクリプトを作成する。

### 実装項目

1. **検証スクリプトの作成**

   - **言語の選択**: Python、シェルスクリプト（Bash/PowerShell）、Node.js など
   - **検証項目ごとのスクリプト**: 各検証項目を独立したスクリプトとして実装
   - **エラーハンドリング**: エラーが発生した場合の対処方法
   - **ログ出力**: 検証結果を分かりやすく出力

2. **検証スクリプトの設計原則**

   - **独立性**: 各検証項目は独立して実行できる
   - **再現性**: 同じ条件で実行すると、同じ結果が得られる
   - **可読性**: コードが読みやすく、理解しやすい
   - **保守性**: 将来的に修正・拡張しやすい

3. **検証スクリプトの例（ZIP デプロイの場合）**

   - **検証項目 1: ZIP 作成プロセスの検証**
     - フロントエンドのビルド
     - 静的ファイルのコピー
     - ZIP ファイルの作成
   - **検証項目 2: ZIP ファイルの内容確認**
     - 必要なファイルが含まれているか
     - 不要なファイルが除外されているか
   - **検証項目 3: 静的ファイル配信の検証**
     - サーバーを起動して静的ファイルが正しく配信されるか
   - **検証項目 4: 環境変数の設定確認**
     - ビルド成果物内の環境変数が正しく設定されているか

### 出力

- **ローカル検証スクリプト**: 各検証項目のスクリプト
- **実行ガイド**: スクリプトの実行方法

### 確認方法

- 各検証項目のスクリプトが実装されているか
- スクリプトが独立して実行できるか
- エラーハンドリングが適切か
- ログ出力が分かりやすいか

---

## フェーズ 5: CI/CD パイプラインの実装

### 目的

実際の CI/CD パイプライン（GitHub Actions、Azure Pipelines など）を実装する。

### 実装項目

1. **CI/CD パイプライン設定ファイルの作成**

   - **GitHub Actions**: `.github/workflows/*.yml`
   - **Azure Pipelines**: `azure-pipelines.yml`
   - **その他**: デプロイ方式に応じた設定ファイル

2. **各ステップの実装**

   - **ステップ 1: ソースコードの取得**
     - `actions/checkout@v3`（GitHub Actions）
     - `checkout`（Azure Pipelines）
   - **ステップ 2: 依存関係のインストール**
     - フロントエンド: `npm ci`, `yarn install`など
     - バックエンド: `pip install -r requirements.txt`など
   - **ステップ 3: ビルド**
     - フロントエンド: `npm run build`など
     - バックエンド: 必要に応じてビルド
   - **ステップ 4: テスト（オプション）**
     - ユニットテスト、統合テストの実行
   - **ステップ 5: 成果物の準備**
     - ZIP デプロイ: ZIP ファイルの作成
     - Docker デプロイ: Docker イメージのビルド
   - **ステップ 6: デプロイ**
     - 成果物をデプロイ先にデプロイ
     - 環境変数の設定

3. **環境変数の設定**

   - **シークレットの管理**: GitHub Secrets、Azure DevOps Variable Groups など
   - **環境変数の設定**: 各ステップで必要な環境変数を設定

4. **エラーハンドリング**

   - 各ステップでエラーが発生した場合の対処方法
   - ログ出力の設定
   - 通知の設定

### 出力

- **CI/CD パイプライン設定ファイル**: GitHub Actions、Azure Pipelines などの設定ファイル
- **環境変数設定ガイド**: シークレットの設定方法

### 確認方法

- CI/CD パイプライン設定ファイルが正しく作成されているか
- 各ステップが正しく実装されているか
- 環境変数が正しく設定されているか
- エラーハンドリングが適切か

---

## フェーズ 6: ローカル検証の実施

### 目的

ローカルでパイプラインを再現し、問題を発見・修正する。

### 実施項目

1. **ローカル検証スクリプトの実行**

   - 各検証項目のスクリプトを実行
   - 検証結果を確認
   - エラーが発生した場合、原因を特定

2. **問題の特定と修正**

   - **問題の特定**: エラーログ、検証結果から問題を特定
   - **原因の分析**: なぜその問題が発生したかを分析
   - **修正の実施**: 問題を修正
   - **再検証**: 修正後、再度検証を実施

3. **検証結果の記録**

   - 各検証項目の結果を記録
   - 発見した問題と修正内容を記録
   - 検証結果レポートを作成

### 出力

- **検証結果レポート**: 各検証項目の結果、発見した問題、修正内容

### 確認方法

- すべての検証項目が成功しているか
- 発見した問題が修正されているか
- 検証結果が記録されているか

---

## フェーズの進め方

### ステップ 1: ローカル検証スクリプトの実装

1. 検証スクリプトの言語を選択
2. 各検証項目のスクリプトを実装
3. エラーハンドリングを実装
4. ログ出力を実装
5. 実行ガイドを作成

### ステップ 2: CI/CD パイプラインの実装

1. CI/CD パイプライン設定ファイルを作成
2. 各ステップを実装
3. 環境変数を設定
4. エラーハンドリングを実装
5. 環境変数設定ガイドを作成

### ステップ 3: ローカル検証の実施

1. 各検証項目のスクリプトを実行
2. 検証結果を確認
3. 問題があれば特定・修正
4. 再検証を実施
5. 検証結果レポートを作成

---

## 完了基準の確認

**学習者主導の要件充足度評価**:

- [ ] ローカル検証スクリプトが実装されているか
- [ ] 各検証項目が独立して実行できるか
- [ ] CI/CD パイプライン設定ファイルが正しく作成されているか
- [ ] 各ステップが正しく実装されているか
- [ ] すべての検証項目が成功しているか
- [ ] 発見した問題が修正されているか

**❓ 「この実装フェーズで十分ですか？修正・追加したい部分はありますか？」**
